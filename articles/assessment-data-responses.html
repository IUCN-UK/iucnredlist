<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Assessment Data Responses • iucnredlist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Assessment Data Responses">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iucnredlist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/assessment-data-responses.html">Assessment Data Responses</a></li>
    <li><a class="dropdown-item" href="../articles/gather-common-data.html">Gather Common Data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/IUCN-UK/iucnredlist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Assessment Data Responses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/IUCN-UK/iucnredlist/blob/main/vignettes/assessment-data-responses.Rmd" class="external-link"><code>vignettes/assessment-data-responses.Rmd</code></a></small>
      <div class="d-none name"><code>assessment-data-responses.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="types-of-response">Types of Response<a class="anchor" aria-label="anchor" href="#types-of-response"></a>
</h2>
<p>We have designed the package to return two ‘types’ of assessment
response from the API, which we refer to as ‘minimal’ and ‘full’
assessment responses.</p>
<div class="section level3">
<h3 id="minimal-responses">Minimal Responses<a class="anchor" aria-label="anchor" href="#minimal-responses"></a>
</h3>
<p>A ‘minimal’ response returns a <code>tibble()</code> containing just
enough information for the user to gather full assessment data for each
assessment they are interested in. For example, you may be interested in
knowing all assessments which have habitat code 1 coded against
them:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">assessments_by_group</span>(api, <span class="st">"habitats"</span>, <span class="st">"1"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># A tibble: 114 × 7</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>   sis_taxon_id assessment_id latest year_published scopes_description_en scopes_code url                                               </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>          <span class="sc">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>lgl<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                 <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                                             </span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a> <span class="dv">1</span>       <span class="dv">133958</span>       <span class="dv">3881104</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">133958</span><span class="sc">/</span><span class="dv">3881104</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a> <span class="dv">2</span>       <span class="dv">134059</span>       <span class="dv">3887925</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134059</span><span class="sc">/</span><span class="dv">3887925</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a> <span class="dv">3</span>       <span class="dv">134019</span>       <span class="dv">3893117</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134019</span><span class="sc">/</span><span class="dv">3893117</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a> <span class="dv">4</span>       <span class="dv">134151</span>       <span class="dv">3910739</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134151</span><span class="sc">/</span><span class="dv">3910739</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a> <span class="dv">5</span>       <span class="dv">134199</span>       <span class="dv">3918266</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134199</span><span class="sc">/</span><span class="dv">3918266</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a> <span class="dv">6</span>       <span class="dv">134378</span>       <span class="dv">3947233</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134378</span><span class="sc">/</span><span class="dv">3947233</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a> <span class="dv">7</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a> <span class="dv">8</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Eastern Africa        <span class="dv">18</span>          https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a> <span class="dv">9</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Pan<span class="sc">-</span>Africa            <span class="dv">10</span>          https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">134438</span>       <span class="dv">3956693</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134438</span><span class="sc">/</span><span class="dv">3956693</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co"># ℹ 104 more rows</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>With no query parameters (arguments) passed to
<code><a href="../reference/assessments_by_group.html">assessments_by_group()</a></code> you’ll get the above dataframe with
a row for each unique assessment ID in the Red List database for all
scopes and years. At this point you may choose to filter out just those
assessments which have a scope of ‘Eastern Africa’ or ‘Pan-Africa’:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ea</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scopes_code</span> <span class="op">==</span> <span class="fl">18</span> <span class="op">|</span> <span class="va">scopes_code</span> <span class="op">==</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>You could then use this ‘minimal’ dataframe and loop over each
assessment ID to gather ‘full’ assessment data for each assessment:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assessment_data_many.html">assessment_data_many</a></span><span class="op">(</span><span class="va">api</span>, <span class="va">ea</span><span class="op">$</span><span class="va">assessment_id</span><span class="op">)</span></span></code></pre></div>
<p>If you know <em>a priori</em> which assessments you need, you can
supply the appropriate arguments to <code><a href="../reference/assessments_by_group.html">assessments_by_group()</a></code>
directly, and save a filtering task further downstream (it will also
likely save on calls to the API database):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Get global assessments published in 2008 for habitat code 1</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">assessments_by_group</span>(api, <span class="st">"habitats"</span>, <span class="st">"1"</span>, <span class="at">year_published =</span> <span class="dv">2008</span>, <span class="at">scope =</span> <span class="dv">1</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># A tibble: 38 × 7</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>   sis_taxon_id assessment_id latest year_published scopes_description_en scopes_code url                                               </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>          <span class="sc">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>lgl<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                 <span class="er">&lt;</span>chr<span class="sc">&gt;</span>       <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                                             </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a> <span class="dv">1</span>       <span class="dv">133958</span>       <span class="dv">3881104</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">133958</span><span class="sc">/</span><span class="dv">3881104</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a> <span class="dv">2</span>       <span class="dv">134059</span>       <span class="dv">3887925</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134059</span><span class="sc">/</span><span class="dv">3887925</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a> <span class="dv">3</span>       <span class="dv">134019</span>       <span class="dv">3893117</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134019</span><span class="sc">/</span><span class="dv">3893117</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a> <span class="dv">4</span>       <span class="dv">134151</span>       <span class="dv">3910739</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134151</span><span class="sc">/</span><span class="dv">3910739</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a> <span class="dv">5</span>       <span class="dv">134199</span>       <span class="dv">3918266</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134199</span><span class="sc">/</span><span class="dv">3918266</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a> <span class="dv">6</span>       <span class="dv">134378</span>       <span class="dv">3947233</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134378</span><span class="sc">/</span><span class="dv">3947233</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a> <span class="dv">7</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a> <span class="dv">8</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Eastern Africa        <span class="dv">18</span>          https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a> <span class="dv">9</span>       <span class="dv">134409</span>       <span class="dv">3952097</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Pan<span class="sc">-</span>Africa            <span class="dv">10</span>          https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134409</span><span class="sc">/</span><span class="dv">3952097</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="dv">10</span>       <span class="dv">134438</span>       <span class="dv">3956693</span> <span class="cn">TRUE</span>   <span class="dv">2008</span>           Global                <span class="dv">1</span>           https<span class="sc">:</span><span class="er">//</span>www.iucnredlist.org<span class="sc">/</span>species<span class="sc">/</span><span class="dv">134438</span><span class="sc">/</span><span class="dv">3956693</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co"># ℹ 28 more rows</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<div class="section level4">
<h4 id="minimal-assessment-data-functions">Minimal assessment data functions<a class="anchor" aria-label="anchor" href="#minimal-assessment-data-functions"></a>
</h4>
<p>Minimal assessment data is returned from the assessments_by_
functions:</p>
<ul>
<li><code><a href="../reference/assessments_by_group.html">assessments_by_group()</a></code></li>
<li><code><a href="../reference/assessments_by_name.html">assessments_by_name()</a></code></li>
<li><code><a href="../reference/assessments_by_sis_id.html">assessments_by_sis_id()</a></code></li>
<li><code><a href="../reference/assessments_by_taxonomy.html">assessments_by_taxonomy()</a></code></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="full-responses">Full Responses<a class="anchor" aria-label="anchor" href="#full-responses"></a>
</h3>
<p>In contrast to the ‘minimal’ responses, you can get ‘full’ assessment
data by first calling <code><a href="../reference/assessment_data.html">assessment_data()</a></code> to get all
assessment data in ‘raw’ format:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get full assessment data for the black rhino</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assessment_data.html">assessment_data</a></span><span class="op">(</span><span class="va">api</span>, <span class="fl">152728945</span><span class="op">)</span></span></code></pre></div>
<p>The above function returns the full response from the API, with no
transformations (except coercing JSON to lists). You can then call
<code><a href="../reference/parse_assessment_data.html">parse_assessment_data()</a></code> to get a tidied named list of
tibbles:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_assessment_data.html">parse_assessment_data</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<p>When calling <code><a href="../reference/parse_assessment_data.html">parse_assessment_data()</a></code> you are allowing
the {iucnredlist} package to perform a number of data tidying routines.
In a nutshell this function will:</p>
<ol style="list-style-type: decimal">
<li>Tidy the ‘taxon’ element in the raw response, moving Common Names,
SSC Groups and Synonyms to named elements at the top-most level in the
list, prepending these parts of the response with
<code>taxon_</code>.</li>
<li>Move conservation_actions_in_place from under conservation_actions
to the top-most level</li>
<li>Remove the ‘documentation’ part of the response. as this is mostly
long paragraphs of text and HTML. If part of the response is important
for your work, we would recommend fetching this from the object created
with <code><a href="../reference/assessment_data.html">assessment_data()</a></code> and process according to your
needs.</li>
<li>Ordering the named lists alphabetically</li>
</ol>
<div class="section level4">
<h4 id="full-assessment-data-functions">Full assessment data functions<a class="anchor" aria-label="anchor" href="#full-assessment-data-functions"></a>
</h4>
<p>Full assessment data is returned from the functions:</p>
<ul>
<li><code><a href="../reference/assessment_data.html">assessment_data()</a></code></li>
<li><code><a href="../reference/assessment_data_many.html">assessment_data_many()</a></code></li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Tarr, Ian Townsend, International Union for Conservation of Nature.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
